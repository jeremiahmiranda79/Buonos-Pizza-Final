

{{!--* I tried to remove as much padding as possible while keeping the original function --}}
{{!--* If you set up a proper form, I can change it to directly accept the submit button instead of wait for a change. --}}


<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1">

    <title>Upload Files</title>

  </head>

  <body>
    <form class="upload-form" action="/api/menu/upload-category" method="post" enctype="multipart/form-data">
      <input id="file" type="file" name="file">
    </form>

    <script type="text/javascript">
      const form = document.querySelector('.upload-form');
      const fileInput = form.querySelector('input[type="file"]');

      function uploadFile(file) {

        const formData = new FormData();
        formData.append('file', file);

        const xhr = new XMLHttpRequest();
        xhr.open('POST', form.action);
        xhr.send(formData);
      }

      fileInput.addEventListener('change', function (e) {
        const file = fileInput.files?.[0];

        if (file) {
          uploadFile(file);
        } 
        else {
          outputBox.textContent = 'No file selected';
        }

        form.reset();
      });

    </script>

  </body>

</html>